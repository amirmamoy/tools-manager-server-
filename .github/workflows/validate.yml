name: Validate Script

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        
      - name: Check files exist
        run: |
          echo "ğŸ“ Checking repository files..."
          ls -la
          echo "---"
          if [ -f "server-manager.sh" ]; then
            echo "âœ… server-manager.sh found"
          else
            echo "âŒ server-manager.sh not found"
            exit 1
          fi
          
      - name: Basic script check
        run: |
          echo "ğŸ” Checking script basics..."
          # Check shebang line
          if head -n1 server-manager.sh | grep -q "#!/bin/bash"; then
            echo "âœ… Shebang is correct"
          else
            echo "âŒ Shebang is missing or incorrect"
            exit 1
          fi
          
          # Check if file has content
          if [ -s "server-manager.sh" ]; then
            echo "âœ… Script has content"
          else
            echo "âŒ Script is empty"
            exit 1
          fi
          
          echo "ğŸ‰ Basic validation passed!"
